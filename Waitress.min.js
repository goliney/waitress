Waitress=function(){this._methods=[],this._params={thisArg:null,args:null},this._flushed=!1},Waitress.prototype={_parseParams:function(a){for(var b=[],c=1;c<a.length;c++)b.push(a[c]);return{thisArg:a[0],args:b}},_apply:function(a,b,c){a.params&&c!==!0&&(b=this._parseParams(a.params)),a.callback.apply(b.thisArg,b.args)},add:function(a,b){if(this._flushed){var c=this._params;b&&b.length>0&&(c=this._parseParams(b)),a.apply(c.thisArg,c.args)}else this._methods.push({callback:a,params:b})},flush:function(){if(!this._flushed){for(this._params=this._parseParams(arguments);this._methods[0];)this._apply(this._methods.shift(),this._params);this._flushed=!0}},run:function(){for(var a=this._parseParams(arguments),b=0;b<this._methods.length;b++)this._apply(this._methods[b],a)}};